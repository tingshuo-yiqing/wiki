



```python
topo = []
def toposort():
    dq = [i for i in range(1, n + 1) if din[i] == 0]
    while dq:
        u = heappop(dq)
        topo.append(u)  # 这里储存拓扑序列
        for v in g[u]:
            # 这里进行图上的状态转移
            din[v] -= 1
            if din[v] == 0:
                heappush(dq, v)
    return len(topo) == n
# 测试链接: https://cses.fi/problemset/task/1679
```

看具体情况使用优先队列或堆。

## 应用

### 判环

给定一个有向图，判断是否存在一个环或合法的排序。判断方式为：当

### 排序的唯一性与字典序

字典序有两种，一种是全局的字典序最大最小，一种是相对的字典序最大最小。前者只需要使用对应的优先队列即可，后者需要建反图。

题目参考：

* [Course Schedule II](https://vjudge.net/problem/CSES-1757) 建反图



### DAG上的动态规划



### 逆向拓扑排序

