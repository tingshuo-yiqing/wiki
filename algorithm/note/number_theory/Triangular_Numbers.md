三角数（Triangular Numbers）在数论和组合数学中非常迷人，也是**Project Euler（欧拉计划）**最钟爱的题材之一。

其定义很简单：$T_n = 1 + 2 + 3 + \dots + n = \frac{n(n+1)}{2}$。

以下是三角数的一些核心性质，以及它们在欧拉计划这类题目中的应用场景：

### 1. 代数性质（基础性质）
*   **公式：** $T_n = \frac{n(n+1)}{2}$。
*   **组合数关系：** $T_n = \binom{n+1}{2}$。这意味着从 $n+1$ 个物体中选出 2 个的方法数。
*   **相邻项相加：** 两个相邻三角数之和是一个**完全平方数**。
    *   $T_{n-1} + T_n = \frac{(n-1)n}{2} + \frac{n(n+1)}{2} = \frac{n^2 - n + n^2 + n}{2} = n^2$。
    *   *例子：* $3 + 6 = 9 (3^2)$；$10 + 15 = 25 (5^2)$。

### 2. 约数性质（Project Euler 第12题的核心）
这是最经典的性质，涉及 $T_n$ 的因子个数：
*   因为 $n$ 和 $n+1$ 是**互质**的（$\gcd(n, n+1) = 1$）。
*   计算 $T_n$ 的因子个数 $d(T_n)$ 时，可以拆分为：
    *   若 $n$ 是偶数：$d(T_n) = d(n/2) \times d(n+1)$
    *   若 $n$ 是奇数：$d(T_n) = d(n) \times d((n+1)/2)$
*   **应用：** 这极大地加快了搜索“第一个拥有超过 500 个约数的三角数”的速度，因为你不需要直接分解 $T_n$，只需要分解较小的 $n$ 和 $n+1$。

### 3. 与多边形数（Figurate Numbers）的联系
*   **六边形数（Hexagonal Numbers）是三角数的子集：** 每一个六边形数都是三角数（$H_n = T_{2n-1}$）。
*   **平方三角数：** 既是三角数又是平方数的数。这与**佩尔方程（Pell's Equation）** $x^2 - 2y^2 = 1$ 的解密切相关。
    *   第一个是 $1$，第二个是 $36$，第三个是 $1225$。

### 4. 几何与求和性质
*   **前 $n$ 项三角数之和：** 称为**四面体数（Tetrahedral numbers）**。
    *   $S_n = \sum_{i=1}^{n} T_i = \frac{n(n+1)(n+2)}{6} = \binom{n+2}{3}$。
*   **倒数之和：** 三角数倒数的无穷级数收敛于 2。
    *   $\sum_{n=1}^{\infty} \frac{1}{T_n} = \sum_{n=1}^{\infty} \frac{2}{n(n+1)} = 2 \sum (\frac{1}{n} - \frac{1}{n+1}) = 2$。（裂项相消法）

### 5. 著名的定理
*   **高斯“尤里卡”定理（Gauss's Eureka Theorem）：** 每个正整数最多可以表示为 **3个三角数** 之和。
    *   高斯在 1796 年的日记中写道：“EYREKA! num = Δ + Δ + Δ”。
*   **数字根（Digital Root）：** 三角数的数字根总是循环的 $1, 3, 6, 1, 6, 3, 1, 9, 9$。这在排除某些数是否为三角数时非常有用。

### 6. 在 Project Euler 中的典型题目
如果你对这些性质感兴趣，可以去刷一下这些题（按难度递增）：
1.  **PE 12 (Highly Divisible Triangular Number):** 找约数个数超过 500 的三角数。（利用互质分解性质）
2.  **PE 42 (Coded Triangle Numbers):** 判断一个单词的权值是否为三角数。（利用 $n = \frac{\sqrt{8x+1}-1}{2}$ 是否为整数）
3.  **PE 45 (Triangular, Pentagonal, and Hexagonal):** 寻找同时属于这三种形式的数。（利用六边形数一定是三角数的性质简化搜索）
4.  **PE 61 (Cyclic Polygonal Numbers):** 处理包括三角数在内的各种多边形数的循环链。
5.  **PE 66 / 94 / 100:** 虽然不直接叫三角数，但解题过程中往往会转化成 $x(x+1)/2 = y^2$ 这种形式，进而引向佩尔方程。

### 如何快速判断一个数 $X$ 是否为三角数？
在编程中最实用的技巧：
检查 $8X + 1$ 是否为一个**完全平方数**。
如果 $8X + 1 = k^2$，那么 $n = (k-1)/2$ 就是对应的项数。
*原因：* $X = \frac{n(n+1)}{2} \implies 8X + 1 = 4n^2 + 4n + 1 = (2n+1)^2$。