## 数据范围

- $2≤N≤2×10^5$
- $1≤Q≤2×10^5$
- $1≤A_n≤10^9(1\le n \le N)$

## 思路

不用真的去操作数组，而是记录操作带来的偏移量。再跟据偏移量进行下标的映射实现真正的操作。

#### 1.计算逻辑起点

逻辑起点是对标物理数组的索引 `0` 的，所以要查询原数组的信息必须对标 `off` 。

``` python
off = (off + x) % n  # 左移
```

在 C++ 或 Java 中，`(-1) % n` 可能会得到  `-1` ，所以你必须写成 `(off - 1 + n) % n` 。但在 **Python** 中，% 运算符会保证结果与除数（n）符号一致。直接写

```python
off = (off - x) % n # 右移
off = (off - x % n + n) % n  # C/C++/Java
```

#### 2.下标映射

无论是左移还是右移，下标映射都是: 

```python
new_i = (i + off - 1) % n  # 减1是为了转成 0-based
```

完整代码: [code](https://atcoder.jp/contests/typical90/submissions/72394921)

## 类似问题

- [ABC 199-C IPFL]
- [ABC 189-E Rotate and Flip]
- [ABC 410-C Rotatable Array](https://atcoder.jp/contests/abc410/tasks/abc410_c)
- [ABC 425-C Rotate and Sum Query](https://atcoder.jp/contests/abc425/tasks/abc425_c)